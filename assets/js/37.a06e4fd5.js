(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{364:function(s,e,a){"use strict";a.r(e);var t=a(4),n=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"vue2-升级-vue3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue2-升级-vue3"}},[s._v("#")]),s._v(" vue2 升级 vue3")]),s._v(" "),e("h3",{attrs:{id:"vue3优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue3优点"}},[s._v("#")]),s._v(" vue3优点")]),s._v(" "),e("p",[s._v("1、双向数据绑定的效率")]),s._v(" "),e("ul",[e("li",[s._v("defineProperty只能监听某个属性，不能对全对象监听")]),s._v(" "),e("li",[s._v("可以省去for in、闭包等内容来提升效率（直接绑定整个对象即可）")]),s._v(" "),e("li",[s._v("可以监听数组，不用再去单独的对数组做特异性操作 vue3.x 可以检测到数组内部数据的变化")])]),s._v(" "),e("p",[s._v("2、提升了页面渲染性能")]),s._v(" "),e("ul",[e("li",[s._v("vdom diff 算法优化")])]),s._v(" "),e("p",[s._v("3、代码的可维护性")]),s._v(" "),e("ul",[e("li",[s._v("compositionApi 比 optionsApi 逻辑清晰，复用性高")])]),s._v(" "),e("h3",{attrs:{id:"升级存在的隐患"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级存在的隐患"}},[s._v("#")]),s._v(" 升级存在的隐患")]),s._v(" "),e("ul",[e("li",[s._v("不兼容IE")]),s._v(" "),e("li",[s._v("框架底层进行了大量重构，新增和删除了很多原来的API，代码结构也发生了变化。很多地方需要进行破坏性修改，从而容易导致各种问题的出现。")]),s._v(" "),e("li",[s._v("项目使用到的第三方插件和 UI框架也需要替换和更改成 对应Vue3可用版本(重要，取决第三方)")])]),s._v(" "),e("h3",{attrs:{id:"升级"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#升级"}},[s._v("#")]),s._v(" 升级")]),s._v(" "),e("ol",[e("li",[s._v("先把Vue2 框架整体替换成 Vue3，因为目前 Vue3也是兼容了 Options 写法，这样代码结构可以先不用更改，后期可以逐步修改（因为涉及到所有页面和组件）。之后新增的页面和组件按照 Vue3 新增的 compositionAPI 结构来写。")]),s._v(" "),e("li",[s._v("把 Vue3 中已经不再支持的 API 和语法进行修改替换。包括 Vue3 已经不再支持过滤器filter，v-model 用法也改变等。")]),s._v(" "),e("li",[s._v("把项目使用到的第三方插件和UI框架替换成Vue3版本，对应用法可能也需要修改。需要通过 package.json 里注册目录，在页面进行检索修改。")])]),s._v(" "),e("p",[e("strong",[s._v("注意")])]),s._v(" "),e("blockquote",[e("p",[s._v("项目中依赖的库并不支持vue3\nvue2到vue3的一些破坏性更改\n项目中依赖组件库破坏性更改\n对一些新特性的尝试(vite,ts,pinia)等 公司项目迁移造成稳定性破坏(极其重要)")])]),s._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[s._v("确保项目代码语法编译无误后，需要检查代码中的业务是否正确，避免对公司项目迁移造成稳定性破坏(极其重要)。")]),s._v(" "),e("li",[s._v("使用 TypeScript 重构 JS 代码，TypeScript 比 JavaScript 多了静态类型检查，也增加了一些新的语法，是给项目锦上添花。但是这一步会比较耗时（因为相当于修改把JS代码都要过一遍），但是项目中可以同时存在JS 和 TS，所以可以逐步替换。")])]),s._v(" "),e("h2",{attrs:{id:"技术栈"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#技术栈"}},[s._v("#")]),s._v(" 技术栈")]),s._v(" "),e("ul",[e("li",[s._v("vue3")]),s._v(" "),e("li",[s._v("typescript")]),s._v(" "),e("li",[s._v("vue-router")]),s._v(" "),e("li",[s._v("pinia")]),s._v(" "),e("li",[s._v("axios")]),s._v(" "),e("li",[s._v("less")]),s._v(" "),e("li",[s._v("ant-design-vue")]),s._v(" "),e("li",[s._v("代码规范（editorconfig + prettier + eslint）")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1. 解决团队之间代码不规范导致的可读性差和可维护性差的问题。\n2. 解决团队成员不同编辑器导致的编码规范不统一问题。\n3. 提前发现代码风格问题，给出对应规范提示，及时修复。减少代码审查过程中反反复复的修改过程，节约时间。\n4. 提交代码，统一编码风格，从此和脏乱差的代码说再见。\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("vite")]),s._v(" "),e("li",[s._v("vite 构建相关插件")]),s._v(" "),e("li",[s._v("语法的变更,见vue迁移文档 "),e("a",{attrs:{href:"https://v3-migration.vuejs.org/zh/breaking-changes/global-api.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("从vue2迁移"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("第三方插件")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("1. @antv/data-set、@antv/g2、@antv/layout、@antv/x6、@antv/x6-vue-shape //拖拽、图表相关\n2. clipboard\n3. js-yaml\n4. lodash\n5. minio\n6. moment => dayjs\n7. monaco-editor\n8. pinyin\n9. sortablejs\n10. vue-resize\n11. vue-virtual-scroller\n12. xterm、xterm-addon-fit、xterm-addon-search、xterm-addon-web-links、xterm-addon-webgl //远程连接相关\n13. @novnc/novnc\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);